{% extends "layout.html" %}

{% block page_title %}{{ my_question['title'] }}{% endblock %}

{% block content %}
     
    <div id="question-page">

        <div id="nav-bar">
            <ul>
                <li>
                    <form action="{{ url_for('route_list') }}">
                        <button>Home</button>
                    </form>
                <li>
                    <form action="{{ url_for('answer_question', question_id=my_question['id']) }}">
                        <button>Answer Question</button>
                    </form>
                <li>
                    <form action="{{ url_for('edit_question', question_id=my_question['id']) }}">
                        <button>Edit Question</button>
                    </form>
                <li>
                    <form action="{{ url_for('delete_question', question_id=my_question['id']) }}">
                        <button>Delete Question</button>
                    </form>
                </li>
            </ul>
        </div>
        
        <div>

            <p>Viewed: {{ my_question["view_number"] }} {% if my_question["view_number"] == "1" %}time{% else %}times{%endif%}</p>

        </div>
               
        <div id="question-message">
            <h3>Message:</h3>
            <pre>{{ my_question['message'] }}</pre>
            {% if my_question['image'] %}
                <div>
                    <a href="{{ url_for('upload_image', filename=my_question['image']) }}">
                        <img src="{{ url_for('upload_image', filename=my_question['image']) }}">
                    </a>
                </div>
            {%endif%}
        </div>

        <div id="answers-header">
            <h3>Answers</h3>
            {{ num_of_answers }} {% if num_of_answers == 1 %}Answer{% else %}Answers{%endif%}
        </div>
        
        <div id="answers_list">
            <ul>
                {% for answer in answers %}
                    <li>
                        <div id="answer-right-side">
                            <p>{% autoescape false %}{{ answer['message'] }}{% endautoescape %}</p>
                            {% if answer['image'] %}
                                <div id="image">
                                    <a href="{{ url_for('upload_image', filename=answer['image']) }}">
                                        <img src="{{ url_for('upload_image', filename=answer['image']) }}">
                                    </a>
                                </div>
                            {%endif%}
                        </div>
                        <div id="answer-left-side">
                            <div>
                                <a href="{{ url_for('down_vote_answer', answer_id=answer['id']) }}">-</a> 
                                {{ answer["vote_number"] }} {% if answer["vote_number"] == '1' %}vote{% else %}votes{%endif%} 
                                <a href="{{ url_for('up_vote_answer', answer_id=answer['id']) }}">+</a>
                            </div>
                            <div>
                                <a href="{{ url_for('delete_answer', answer_id=answer['id']) }}">Delete</a>
                            </div>
                        </div>
                        
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

{% endblock %}